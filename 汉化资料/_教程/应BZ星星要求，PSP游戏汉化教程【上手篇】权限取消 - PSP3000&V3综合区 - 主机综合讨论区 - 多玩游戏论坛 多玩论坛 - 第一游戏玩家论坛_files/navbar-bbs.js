(function(){var z=(function(H){H=H.toLowerCase();var G=/(webkit)[ \/]([\w.]+)/.exec(H)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(H)||/(msie) ([\w.]+)/.exec(H)||!/compatible/.test(H)&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(H)||[];var I=G[1],F={};if(I){F[I]=G[2]||"0"}return F})(navigator.userAgent);try{document.execCommand("BackgroundImageCache",false,true)}catch(v){}var j={isFunction:function(F){return Object.prototype.toString.call(F)==="[object Function]"},_13:/^(\s|\u00A0)+|(\s|\u00A0)+$/g,trim:function(F){return(F||"").replace(j._13,"")},each:function(K,L){var G,I=0,J=K.length,F=J===undefined||j.isFunction(K),H=arguments[2];if(H===undefined){H=window}if(F){for(G in K){if(L.call(H,K[G],G,K)===false){break}}}else{while(I<J&&L.call(H,K[I],I,K)!==false){I++}}},delegate:function(F,I){if(!j.isFunction(I)){return}var H=[];for(var G=2;G<arguments.length;G++){H.push(arguments[G])}return function(){var J=H.concat();for(var K=0;K<arguments.length;K++){J.push(arguments[K])}return I.apply(F,J)}},createStyleSheet:function(G){var F;if(document.createStyleSheet){F=document.createStyleSheet();F.cssText=G}else{F=document.createElement("style");F.appendChild(document.createTextNode(G));document.getElementsByTagName("head")[0].appendChild(F)}return F},getScript:function(G,I){var H=document.getElementsByTagName("head")[0]||document.documentElement;var F=document.createElement("script");F.type="text/javascript";F.async=true;F.charset="utf-8";F.src=G;F.onload=F.onreadystatechange=function(){if(!this.readyState||this.readyState==="loaded"||this.readyState==="complete"){if(j.isFunction(I)){I()}F.onload=F.onreadystatechange=null;if(F.parentNode){F.parentNode.removeChild(F)}}};H.insertBefore(F,null)}};var a={get:function(I){var J,G,H,F;if(I){if(I.nodeType){return I}if(typeof I==="string"){J=I;I=document.getElementById(I);if(I&&I.id===J){return I}else{if(I&&document.all){I=null;G=document.all[J];for(H=0,F=G.length;H<F;++H){if(G[H].id===J){return G[H]}}}}return I}return I}return null},_12:/[\n\t]/g,hasClass:function(G,F){G=a.get(G);F=" "+F+" ";if((" "+G.className+" ").replace(a._12," ").indexOf(F)>-1){return true}return false},addClass:function(G,F){G=a.get(G);if(!G.className){G.className=F}else{if(!a.hasClass(G,F)){F=G.className+" "+F;G.className=j.trim(F)}}},removeClass:function(H,G){H=a.get(H);if(H.className){var F=" "+H.className.replace(a._12," ")+" ";F=F.replace(" "+G+" "," ");H.className=j.trim(F)}},isAncestor:function(F,G){if(F&&G){if(F.contains&&F!==G){return F.contains(G)}else{if(F.compareDocumentPosition){return !!(F.compareDocumentPosition(G)&16)}}}return false},getChildren:function(G){G=a.get(G);var F=[];j.each(G.childNodes,function(H){if(H.nodeType==1){F.push(H)}});return F}};var E={attach:function(G,F,H){G=a.get(G);if(!G){return}if(G.addEventListener){G.addEventListener(F,H,false)}else{G.attachEvent("on"+F,H)}},detach:function(G,F,H){G=a.get(G);if(!G){return}if(G.removeEventListener){G.removeEventListener(F,H,false)}else{G.detachEvent("on"+F,H)}},preventDefault:function(F){if(F.preventDefault){F.preventDefault()}else{F.returnValue=false}},getTarget:function(G){var F=G.target||G.srcElement;if(F&&F.nodeType==3){return F.parentNode}return F},_8:function(H,F){H=H||window.event;var G=H.relatedTarget||H.fromElement;if(G&&G==F||a.isAncestor(F,G)){return true}else{return false}},mouseenter:function(F,G){F=a.get(F);if(!F){return}if(typeof F.onmouseenter=="undefined"){E.attach(F,"mouseover",function(H){if(!E._8(H,F)){G(H)}})}else{E.attach(F,"mouseenter",G)}},mouseleave:function(F,G){F=a.get(F);if(!F){return}if(typeof F.onmouseleave=="undefined"){E.attach(F,"mouseout",function(H){if(!E._8(H,F)){G(H)}})}else{E.attach(F,"mouseleave",G)}}};function d(G,L){var J=G.getElementsByTagName("*"),K,I;for(var H=0,F=J.length;H<F;H++){K=J[H];if(typeof K.getAttribute!="undefined"&&(I=K.getAttribute("data-dom"))){L[I]=K;K.removeAttribute("data-dom")}}}function n(H){this._9=H;var F=a.getChildren(H),I=F.length;if(I<2){return}j.each(F,function(L){H.appendChild(L.cloneNode(true))});this._5=I;this._3=a.getChildren(H);H.scrollTop=0;this._10=this._3[0].offsetTop;var K=this,G=function(){if(K._4!=null){clearTimeout(K._4);K._4=null}K.stop()},J=function(){K._4=setTimeout(function(){K.start()},100)};E.attach(H,"mouseover",G);E.attach(H,"mouseout",J);this.dispose=function(){E.detach(H,"mouseover",G);E.detach(H,"mouseout",J);H=this._9=this._3=null};this.start()}n.prototype={_18:false,_14:function(){if(this._5<2||this._2!=null){return}var H=new Date().getTime(),K,J=this._9,I=this._3;var G=J.scrollTop,F;j.each(I,j.delegate(this,function(O,N){var M=O.offsetTop-this._10;if(G<M){if(N>this._5){N-=this._5;var P=O.offsetTop-I[N].offsetTop;G=J.scrollTop=G-P;M-=P}F=M;return false}}));if(F==null){F=I[1].offsetTop-this._10}var L=F-G;this._2=setInterval(j.delegate(this,function(){K=new Date().getTime();var M=Math.floor((K-H)/500*L)+G;if(M>=F){M=F;clearInterval(this._2);this._2=null;if(this._0){this._0()}}if(M!=J.scrollTop){J.scrollTop=M}}),10)},_6:false,_11:3000,start:function(F){this.stop();this._6=true;if(F>0){this._11=F}this._0=j.delegate(this,function(){this._15=setTimeout(j.delegate(this,function(){this._14()}),this._11)});this._0()},stop:function(){if(!this._6){return}this._6=false;this._0=null;clearTimeout(this._15)}};function y(J,I){var K=this.dom={};K.el=J;var F,L=this,G,H=100;E.mouseenter(J,function(){clearTimeout(G);G=setTimeout(function(){if(!L._1){var M=new Date().getTime();if(F==null||M-F>1000){F=M;j.getScript(I)}}L._7=true;L.show()},H)});E.mouseleave(J,function(){clearTimeout(G);G=setTimeout(function(){L._7=false;L.hide()},H)})}y.prototype={_17:function(H,G){if(this._16){return}this._16=true;var I=this.dom,F=document.createElement("div");F.className="nav-popup";F.innerHTML='<div class="pop-t"><div class="pop-ti"><div class="pop-tc"></div></div></div><div class="pop-m"><div class="pop-mi"><div class="pop-mc" data-dom="popc"></div></div></div><div class="pop-b"><div class="pop-bi"><div class="pop-bc"></div></div></div><span class="pop-ar"></span>';d(F,I);F.style.display="none";I.el.appendChild(F);I.popup=F},render:function(H,G){this._17();if(!this._1&&G){B(G)}var I=this.dom;if(typeof H=="string"){I.popc.innerHTML=H}else{I.popc.innerHTML="";I.popc.appendChild(H)}this._1=true;if(z.msie||z.opera){var F=this.dom.popup;F.style.visibility="hidden";this.show();F.style.width=this.dom.popc.firstChild.offsetWidth+28+"px";if(!this._7){this.hide()}F.style.visibility=""}else{if(this._7){this.show()}}},show:function(){if(!this._1){return}this.dom.popup.style.display=""},hide:function(){if(!this._1){return}this.dom.popup.style.display="none"}};var D={};var l=a.get("header"),o;if(!l){return}j.each(a.getChildren(l),function(F){if(F.nodeType==1&&a.hasClass(F,"headerwarp")){o=F;return false}});if(!o){return}var r,h;j.each(a.getChildren(o),function(F){if(F.nodeType==1){if(a.hasClass(F,"logo")){r=F}else{if(a.hasClass(F,"nav_account")){h=F}else{o.removeChild(F)}}}});var c='body #header{overflow:visible;line-height:30px;}#header div.headerwarp{overflow:visible;z-index:30000;}#header *{position:static;float:none;width:auto;height:auto;overflow:visible;margin:0;padding:0;border:0;text-align:left;background:transparent;font-family:"\u5b8b\u4f53",tahoma;font-size:12px;font-weight:normal;font-style:normal;}#header em{font-style:normal;}#header ul{list-style:none;}#header .g-info{float:left;padding-left:5px;color:#666;}#header .s-nav{display:inline-block;*display:inline;position:relative;padding:0 15px 0 8px;z-index:1;zoom:1;}#header .s-nav em{color:#fff;cursor:pointer;}#header .s-nav em i{position:absolute;right:5px;top:14px;_top:13px;width:7px;height:4px;overflow:hidden;background:url(http://www.duowan.com/public/s/i/navbar/nav_stuff.png) no-repeat -93px 0;}#header .nav-popup{position:absolute;top:28px;left:0;*width:640px;}#header .pop-t,#header .pop-ti,#header .pop-tc,#header .pop-b,#header .pop-bi,#header .pop-bc{height:8px;overflow:hidden;background:url(http://www.duowan.com/public/s/i/navbar/nav_stuff.png) no-repeat;}#header .pop-t,#header .pop-b{padding-left:8px;}#header .pop-ti,#header .pop-bi{padding-right:8px;}#header .pop-t{background-position:0 -5px;}#header .pop-ti{background-position:right -5px;}#header .pop-tc{background-repeat:repeat-x;background-position:0 -21px;}#header .pop-b{background-position:0 -13px;}#header .pop-bi{background-position:right -13px;}#header .pop-bc{background-repeat:repeat-x;background-position:0 -29px;}#header .pop-m{padding:0 1px;border:1px solid #c5c5c5;border-width:0 1px;background:#f7f7f7;}#header .pop-mi{padding:0 4px;background:#eee;}#header .pop-mc{overflow:hidden;padding:3px 6px 8px 8px;border:1px solid #dedede;border-width:0 1px;background:#fff;zoom:1;}#header .pop-ar{position:absolute;left:30px;top:-3px;width:5px;height:5px;overflow:hidden;background:url(http://www.duowan.com/public/s/i/navbar/nav_stuff.png) no-repeat -7px 0;}#header .s-news{*position:relative;float:left;height:18px;overflow:hidden;margin:6px 0 0 15px;}#header .s-news li{*position:relative;width:280px;height:18px;overflow:hidden;padding-right:32px;line-height:18px;}#header .s-news a{position:relative;display:inline-block;cursor:pointer;}#header .s-news i{position:absolute;right:-32px;top:4px;width:28px;height:10px;overflow:hidden;background:url(http://www.duowan.com/public/s/i/navbar/nav_stuff.png) no-repeat -62px -37px;}#header .p-info{position:relative;float:right;margin-left:5px;color:#666;z-index:1;}#header .p-info .username{font-family:tahoma,sans-serif;font-weight:bold;color:#fc0;}#header .new-msg{margin-right:2px;cursor:pointer;}#header .new-msg:hover{text-decoration:none;}#header .new-msg i{display:inline-block;width:11px;height:8px;overflow:hidden;margin-right:4px;*vertical-align:middle;background:url(http://www.duowan.com/public/s/i/navbar/nav_stuff.png) no-repeat -51px -45px;}#header .new-msg span{display:inline-block;line-height:30px;color:#fc0;}#header .new-msg:hover span{color:#ffe400;}#header .p-info .nav-popup{left:auto;right:-5px;}#header .p-info .pop-ar{left:auto;right:30px;}#header .t-msg{position:absolute;right:0;top:28px;padding:6px 30px 6px 10px;border:1px solid #ccc;line-height:20px;white-space:nowrap;background:#fdffea;color:#555;}#header .t-msg a{color:#359fcf;}#header .t-msg .close{position:absolute;right:7px;top:7px;width:8px;height:7px;overflow:hidden;line-height:50px;background:url(http://www.duowan.com/public/s/i/navbar/nav_stuff.png) -92px -37px;}#header .nav-block{margin-right:2px;}#header .nav-block h3{height:24px;margin:5px 0;padding:0 5px 0 25px;line-height:24px;font-weight:normal;font-family:tahoma;white-space:nowrap;background:#f0f0f0 url(http://www.duowan.com/public/s/i/navbar/nav_stuff.png) no-repeat -1000px 0;color:#565656;}#header .nav-block a{display:block;height:24px;overflow:hidden;padding:0 5px;line-height:24px;font-family:tahoma;text-decoration:none;white-space:nowrap;color:#565656;}#header .nav-block a:hover{text-decoration:none;background-color:#f0f0f0;color:#f40;}#header .nav-block h3 a{display:inline;padding:0;}#header table{border-collapse:collapse;}#header td{vertical-align:top;}#header h3.nav-icon-site{background-position:-79px -102px;}#header h3.nav-icon-channel{background-position:-79px -78px;}#header h3.nav-icon-bbs{background-position:-79px -54px;}#header h3.nav-icon-q{background-position:-79px -126px;}#header h3.nav-icon-my{background-position:-79px -150px;}#header h3.nav-icon-data{background-position:-79px -174px;}#header h3.nav-icon-ent{background-position:-79px -198px;}#header h3.nav-icon-tool{background-position:-79px -222px;}#header h3.nav-icon-tv{background-position:-79px -246px;}';var i=j.createStyleSheet(c);function B(F){if(document.createStyleSheet){i.cssText+=F}else{i.appendChild(document.createTextNode(F))}}var t=document.createElement("div");t.className="g-info";t.innerHTML='<a href="http://www.duowan.com/">\u9996\u9875</a> |<div class="s-nav" data-dom="gnav"><em>\u5168\u7ad9\u5bfc\u822a<i></i></em></div>';d(t,D);o.insertBefore(t,r?r.nextSibling:o.firstChild);var q=window.Navbar={dom:D},C=window.Navbar_PDataHost||"http://121.9.221.184:8080/",w=window.Navbar_NewsDataUrl||"http://www.duowan.com/public/s/i/navbar/nav-news.js";q.gNav=new y(D.gnav,window.Navbar_GDataUrl||"http://www.duowan.com/public/s/i/navbar/navbar-gdata.js");if(w.indexOf("?")<0){var b=new Date(),x=b.getMonth()+1,s=b.getDate();if(x<10){x="0"+x}if(s<10){s="0"+s}w+="?"+b.getFullYear()+x+s}j.getScript(w,function(){var F=window.Navbar_News;if(F&&F.length>0){var G=document.createElement("ul");G.className="s-news";j.each(F,function(J){if(J&&J.length>1){var H=document.createElement("li"),I=document.createElement("a");I.innerHTML=J[1];I.href=J[0];if(J[2]==1){I.appendChild(document.createElement("i"))}H.appendChild(I);G.appendChild(H)}});o.insertBefore(G,t.nextSibling);new n(G)}});var f=window.navbar_username;if(!f){return}if(!h){return}var k,A,p;j.each(h.getElementsByTagName("a"),function(F){if(F.nodeName=="A"){if(!k&&j.trim(F.innerHTML)=="\u9000\u51fa"){k=F.href}else{if(!A&&F.className=="login_thumb"){A=F}else{if(!p&&F.className=="loginName"){p=F}}}}});if(!k){return}var e=document.createElement("div");e.className="p-info";e.innerHTML='<a href="http://bbs.duowan.com/fans.php" class="username" data-dom="nickname">&nbsp;</a> |<div class="s-nav" data-dom="pnav"><em>\u6211\u7684\u5bfc\u822a<i></i></em></div>| <a href="#" target="_self" data-dom="logout">\u9000\u51fa</a><div class="t-msg" style="display:none;"><ul data-dom="tlist"></ul><a href="#" class="close" title="\u5173\u95ed" data-dom="tclose">X</a></div>';d(e,D);if(p){D.nickname.innerHTML=p.innerHTML;D.nickname.href=p.href;p=null}else{D.nickname.innerHTML=f}D.logout.href=k;o.appendChild(e);if(A){o.appendChild(A)}h.parentNode.removeChild(h);h=null;var g=encodeURIComponent(f);q.user={init:function(K){if(!K){return}if(K.name){D.nickname.innerHTML=K.name}if(K.home){D.nickname.href=K.home}if(K.unread>0){var G=document.createElement("a"),F=document.createDocumentFragment();G.className="new-msg";G.innerHTML="<i></i><span>"+K.unread+"</span>";if(K.inbox){G.href=K.inbox}G.title="\u60a8\u6709"+K.unread+"\u6761\u65b0\u6d88\u606f";E.attach(G,"click",function(M){j.getScript(C+"user/refresh?"+g);E.detach(G,"click",arguments.callee)});F.appendChild(G);F.appendChild(document.createTextNode("| "));e.insertBefore(F,D.logout)}var J=K.tip;if(J&&(J.fans>0||J.mentions>0)){var I=D.tlist,L=D.tclose;I.parentNode.style.display="";var H="";if(J.fans>0){H+="<li>"+J.fans+'\u4f4d\u65b0\u7c89\u4e1d\uff0c<a href="'+J.link+'">\u67e5\u770b\u6211\u7684\u7c89\u4e1d</a></li>'}if(J.mentions>0){H+="<li>"+J.mentions+'\u6761\u5fae\u535a\u63d0\u5230\u6211\uff0c<a href="'+J.link+'">\u67e5\u770b@\u6211</a></li>'}I.innerHTML=H;E.attach(L,"click",function(M){E.preventDefault(M);j.getScript(C+"tip/close?"+g);E.detach(L,"click",arguments.callee);I.parentNode.parentNode.removeChild(I.parentNode);I=L=null});E.attach(I,"click",function(N){var M=E.getTarget(N);if(M&&(M.nodeName=="A"||M.parentNode&&M.parentNode.nodeName=="A")){j.getScript(C+"tip/refresh?"+g);E.detach(I,"click",arguments.callee)}})}}};var m=C+"user?"+g,u=window.navbar_fid;if(u!=null){m+="/"+encodeURIComponent(u)}j.getScript(m);q.pNav=new y(D.pnav,C+"menu?"+g);q.pNav.load=function(G){var F=["<table><tr>"];j.each(G.categories,function(H){if(!H){return}F.push('<td><div class="nav-block"><h3 class="nav-icon-'+(H.icon||"q")+'">'+H.text+"("+H.items.length+")</h3>");j.each(H.items,function(I){F.push('<a href="'+I.link+'">'+I.text+"</a>")});F.push("</div></td>")});F.push("</tr></table>");this.render(F.join(""))}})();